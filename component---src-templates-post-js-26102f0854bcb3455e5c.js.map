{"version":3,"file":"component---src-templates-post-js-26102f0854bcb3455e5c.js","mappings":"oOAGA,SAASA,EAAIC,EAAOC,GACnB,OACC,gBAAC,WAAD,KACCD,GACAA,EAAME,KAAI,SAACC,EAAMC,GAChB,OACA,gBAAC,WAAD,CAAgBC,IAAKF,EAAO,IAAMC,GACjC,qBAAGE,KAAMH,EAAKI,IAAK,aAAW,OAAM,uBAAKC,UAAS,OAASP,GAAS,uBAAKQ,wBAAyB,CAACC,OAAQP,EAAKQ,WAC/GR,EAAKH,OAASD,EAAII,EAAKH,MAAOC,EAAM,QAS3B,SAASW,EAAT,GAA+B,IAAhBC,EAAe,EAAfA,KAAMF,EAAS,EAATA,MAEnC,OACC,uBAAKH,UAAU,MAAMM,GAAG,OACvB,qBAAGR,KAAK,OAAO,aAAW,OAAM,uBAAKE,UAAU,aAAaG,IAC3DZ,EAAIc,EAAKb,MAAO,I,wBCJL,SAASe,EAAT,GAAuD,IAAvBC,EAAsB,EAA9BH,KAAQG,IAAOC,EAAe,EAAfA,aAEpCC,EAAAA,EAAAA,IAAY,GAwC7B,OAhCAC,EAAAA,WAAgB,WAEf,IAAMC,EAAMC,SAASC,eAAe,OAAOC,SAE3CC,YAAW,WACV,IACMC,EADWC,MAAMC,KAAKN,SAASO,iBAAiB,sBAC7B1B,KAAI,SAAA2B,GAAC,OAzB1BC,EAyBwCD,EAzB7BE,wBACXC,EAAOX,SAASW,KAChBC,EAAQZ,SAASa,gBACjBC,EAAYC,OAAOC,aAAeJ,EAAME,WAAaH,EAAKG,UAC1DG,EAAYL,EAAMK,WAAaN,EAAKM,WAAa,EACjDC,EAAMT,EAAIS,IAAOJ,EAAYG,EAC5BE,KAAKC,MAAMF,GAPnB,IACOT,EACAE,EACAC,EACAE,EACAG,EACAC,KAqBJH,OAAOM,iBAAiB,UAAU,WAEjC,IAAItC,GAAK,EACT,IAAKA,EAAI,EAAGA,EAAIqB,EAAQkB,OAAQvC,IAC/B,GAAIgC,OAAOC,YAAeD,OAAOQ,YAAc,EAAKnB,EAAQrB,GAAI,CAC/DA,EAAIoC,KAAKK,IAAIzC,EAAI,EAAG,GAEpB,MAGF,IAAK,IAAI0C,EAAI,EAAGA,EAAI1B,EAAIuB,OAAQG,IAC/B1B,EAAI0B,GAAGvB,SAAS,GAAGwB,UAAUC,OAAO,OAErC5B,EAAIoB,KAAKS,IAAI7C,EAAGgB,EAAIuB,OAAS,IAAIpB,SAAS,GAAGwB,UAAUG,IAAI,YAG1D,OAED,IAQF,gBAACC,EAAA,EAAD,KACC,gBAACC,EAAA,EAAD,CACCzC,MAAOK,EAAIqC,YAAY1C,MACvB2C,SAAUtC,EAAIuC,OAAOC,KACrBC,YAAazC,EAAIqC,YAAYK,QAC7BC,MAAO3C,EAAIqC,YAAYM,OAAS3C,EAAIqC,YAAYM,MAAMC,YAEvD,4BACA,uBAAKpD,UAAU,WACd,gBAACqD,EAAA,EAAD,CAAYR,YAAarC,EAAIqC,YAAaS,WAAY9C,EAAI8C,WAAYC,UAAQ,EAACC,UAAQ,IACvF,gBAAC,EAAAC,YAAD,KAAcjD,EAAIgB,MAClB,uBAAKxB,UAAU,WACbS,EAAYiD,UACZ,2BACC,gBAAC,EAAAC,KAAD,CAAMC,GAAInD,EAAYiD,SAASV,KAAMhD,UAAU,oBAC9C,uBAAKA,UAAU,qBAAf,cACA,uBAAKA,UAAU,iBAAiBS,EAAYiD,SAASvD,SAIxD,uBAAKH,UAAU,WACdS,EAAYoD,MACZ,2BACC,gBAAC,EAAAF,KAAD,CAAMC,GAAInD,EAAYoD,KAAKb,KAAMhD,UAAU,gBAC1C,uBAAKA,UAAU,qBAAf,UACA,uBAAKA,UAAU,iBAAiBS,EAAYoD,KAAK1D,WAOtD,gBAACC,EAAD,CAAKC,KAAMG,EAAIsD,gBAAiB3D,MAAOK,EAAIqC,YAAY1C","sources":["webpack://arts-random-thoughts/./src/components/TOC/index.js","webpack://arts-random-thoughts/./src/templates/post.js"],"sourcesContent":["import React from \"react\"\nimport \"./TOC.scss\"\n\nfunction foo(items, level) {\n\treturn(\n\t\t<React.Fragment>\n\t\t{items &&\n\t\t\titems.map((item, i) => {\n\t\t\t\treturn(\n\t\t\t\t<React.Fragment key={item + \"-\" + i}>\n\t\t\t\t\t<a href={item.url} aria-label=\"url\"><div className={`toc-${level}`}><div dangerouslySetInnerHTML={{__html: item.title}} /></div></a>\n\t\t\t\t\t{item.items && foo(item.items, level+1)}\n\t\t\t\t</React.Fragment>\n\t\t\t\t)\n\t\t\t})\n\t\t}\n\t\t</React.Fragment>\n\t)\n}\n\nexport default function TOC({ data, title }) {\n\n\treturn(\n\t\t<div className=\"toc\" id=\"toc\">\n\t\t\t<a href=\"#top\" aria-label=\"url\"><div className=\"toc-0 yay\">{title}</div></a>\n\t\t\t{foo(data.items, 1)}\n\t\t</div>\n\t)\n\n}","import React from \"react\"\nimport { graphql, Link } from \"gatsby\"\nimport { MDXRenderer } from \"gatsby-plugin-mdx\"\nimport Layout from \"../components/Layout\"\nimport PostHeader from \"../components/PostHeader\"\nimport TOC from \"../components/TOC\"\nimport SEO from \"../components/SEO\"\n// import { DiscussionEmbed } from \"disqus-react\"\nimport useDarkMode from 'use-dark-mode';\nimport \"../styles/post.scss\"\n\nfunction getCoords(elem) { // crossbrowser version\n\tconst box = elem.getBoundingClientRect();\n\tconst body = document.body;\n\tconst docEl = document.documentElement;\n\tconst scrollTop = window.pageYOffset || docEl.scrollTop || body.scrollTop;\n\tconst clientTop = docEl.clientTop || body.clientTop || 0;\n\tconst top = box.top +  scrollTop - clientTop;\n\treturn Math.round(top);\n}\n\nexport default function PageTemplate({ data: { mdx }, pageContext }) {\n\n\tconst darkMode = useDarkMode(false)\n\t// const [disqusDark, setDisqusDark] = React.useState(false)\n\t\n\t// React.useEffect(() => {\n\t// \tsetTimeout(() => setDisqusDark(darkMode.value), 400)\n\t// \t// delay so that the background gets to adjust before updating disqus\n\t// }, [darkMode.value])\n\n\tReact.useEffect(() => {\n\n\t\tconst toc = document.getElementById('toc').children\n\n\t\tsetTimeout(() => {\n\t\t\tconst headings = Array.from(document.querySelectorAll(\".post-title,h1,h2\"))\n\t\t\tconst cutoffs = headings.map(y => getCoords(y))\n\t\t\twindow.addEventListener('scroll', function() {\n\t\t\t\t// console.log('scroll => ', window.pageYOffset)\n\t\t\t\tlet i = -1\n\t\t\t\tfor (i = 0; i < cutoffs.length; i ++) {\n\t\t\t\t\tif (window.pageYOffset + (window.innerHeight / 5) < cutoffs[i]) {\n\t\t\t\t\t\ti = Math.max(i - 1, 0)\n\t\t\t\t\t\t// console.log(headings[i].innerText, cutoffs[i])\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let j = 0; j < toc.length; j ++) {\n\t\t\t\t\ttoc[j].children[0].classList.remove('yay')\n\t\t\t\t}\n\t\t\t\ttoc[Math.min(i, toc.length - 1)].children[0].classList.add('yay')\n\n\t\t\t});\n\t\t}, 1000)\n\n\t}, [])\n\n\t// const disqusConfig = {\n\t// \tshortname: `artt-github-io`,\n\t// \tconfig: { identifier: mdx.fields.slug },\n\t// }\n\n\treturn (\n\t\t<Layout>\n\t\t\t<SEO\n\t\t\t\ttitle={mdx.frontmatter.title}\n\t\t\t\tpathname={mdx.fields.slug}\n\t\t\t\tdescription={mdx.frontmatter.excerpt}\n\t\t\t\timage={mdx.frontmatter.image && mdx.frontmatter.image.publicURL}\n\t\t\t/>\n\t\t\t<div />\n\t\t\t<div className=\"content\">\n\t\t\t\t<PostHeader frontmatter={mdx.frontmatter} timeToRead={mdx.timeToRead} showLang showTags/>\n\t\t\t\t<MDXRenderer>{mdx.body}</MDXRenderer>\n\t\t\t\t<div className=\"postnav\">\n\t\t\t\t\t{pageContext.previous &&\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Link to={pageContext.previous.slug} className=\"postnav-previous\">\n\t\t\t\t\t\t\t\t<div className=\"postnav-direction\">‹ previous</div>\n\t\t\t\t\t\t\t\t<div className=\"postnav-title\">{pageContext.previous.title}</div>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t<div className=\"filler\" />\n\t\t\t\t\t{pageContext.next &&\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Link to={pageContext.next.slug} className=\"postnav-next\">\n\t\t\t\t\t\t\t\t<div className=\"postnav-direction\">next ›</div>\n\t\t\t\t\t\t\t\t<div className=\"postnav-title\">{pageContext.next.title}</div>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t{/* <DiscussionEmbed {...disqusConfig} className=\"disqus\" theme={String(disqusDark)} /> */}\n\t\t\t</div>\n\t\t\t<TOC data={mdx.tableOfContents} title={mdx.frontmatter.title} />\n\t\t</Layout>\n\t)\n}\n\nexport const pageQuery = graphql`\n\tquery BlogPostQuery($id: String) {\n\t\tmdx(id: { eq: $id }) {\n\t\t\tid\n\t\t\tbody\n\t\t\tfields {\n\t\t\t\tslug\n\t\t\t}\n\t\t\tfrontmatter {\n\t\t\t\ttitle\n\t\t\t\tdate(formatString: \"YYYY.MM.DD\")\n\t\t\t\ttags\n\t\t\t\tlang\n\t\t\t\texcerpt\n\t\t\t\timage {\n\t\t\t\t\tpublicURL\n\t\t\t\t\tchildImageSharp {\n\t\t\t\t\t\tgatsbyImageData(layout: FULL_WIDTH)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshowimage\n\t\t\t}\n\t\t\ttimeToRead\n\t\t\ttableOfContents(maxDepth: 2)\n\t\t}\n\t}\n`"],"names":["foo","items","level","map","item","i","key","href","url","className","dangerouslySetInnerHTML","__html","title","TOC","data","id","PageTemplate","mdx","pageContext","useDarkMode","React","toc","document","getElementById","children","setTimeout","cutoffs","Array","from","querySelectorAll","y","box","getBoundingClientRect","body","docEl","documentElement","scrollTop","window","pageYOffset","clientTop","top","Math","round","addEventListener","length","innerHeight","max","j","classList","remove","min","add","Layout","SEO","frontmatter","pathname","fields","slug","description","excerpt","image","publicURL","PostHeader","timeToRead","showLang","showTags","MDXRenderer","previous","Link","to","next","tableOfContents"],"sourceRoot":""}